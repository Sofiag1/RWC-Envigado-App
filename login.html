<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <meta name="description" content="Miminium Admin Template v.1">
  <meta name="author" content="Isna Nur Azis">
  <meta name="keyword" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Miminium</title>

  <!-- start: Css -->
  <link rel="stylesheet" type="text/css" href="asset/css/bootstrap.min.css">

  <!-- plugins -->
  <link rel="stylesheet" type="text/css" href="asset/css/plugins/font-awesome.min.css"/>
  <link rel="stylesheet" type="text/css" href="asset/css/plugins/simple-line-icons.css"/>
  <link rel="stylesheet" type="text/css" href="asset/css/plugins/animate.min.css"/>
  <link rel="stylesheet" type="text/css" href="asset/css/plugins/icheck/skins/flat/aero.css"/>
  <link href="asset/css/style.css" rel="stylesheet">
  <!-- end: Css -->

  <link rel="shortcut icon" href="asset/img/logomi.png">
  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
    </head>

    <body id="mimin" class="dashboard form-signin-wrapper">

      <div class="container">

        <form class="form-signin">
          <div class="panel periodic-login">
              <span class="atomic-number">28</span>
              <div class="panel-body text-center">
                  <h1 class="atomic-symbol">Mi</h1>
                  <p class="atomic-mass">14.072110</p>
                  <p class="element-name">Miminium</p>

                  <i class="icons icon-arrow-down"></i>
                  <div class="form-group form-animate-text" style="margin-top:40px !important;">
                    <input id="email" type="text" class="form-text" required>
                    <span class="bar"></span>
                    <label>Username</label>
                  </div>
                  <div class="form-group form-animate-text" style="margin-top:40px !important;">
                    <input id="password" type="password" class="form-text" required>
                    <span class="bar"></span>
                    <label>Password</label>
                  </div>
                  <label class="pull-left">
                  <input type="checkbox" class="icheck pull-left" name="checkbox1"/> Remember me
                  </label>
                  <input type="submit" class="btn col-md-12" value="SignIn" onclick="signInEvent();"/>
              </div>
                <div class="text-center" style="padding:5px;">
                    <a href="forgotpass.html">Forgot Password </a>
                    <a href="reg.html">| Signup</a>
                </div>
          </div>
        </form>
          <a id="redirect" href="index.html"></a>

      </div>

      <!-- end: Content -->
      <!-- start: Javascript -->
      <script src="asset/js/jquery.min.js"></script>
      <script src="asset/js/jquery.ui.min.js"></script>
      <script src="asset/js/bootstrap.min.js"></script>

      <script src="asset/js/plugins/moment.min.js"></script>
      <script src="asset/js/plugins/icheck.min.js"></script>

      <!-- custom -->
      <script src="asset/js/main.js"></script>
      <script type="text/javascript">
       $(document).ready(function(){
         $('input').iCheck({
          checkboxClass: 'icheckbox_flat-aero',
          radioClass: 'iradio_flat-aero'
        });
       });
     </script>
        
    <script src="https://www.gstatic.com/firebasejs/live/3.0/firebase.js"></script>    
    
    <script>
         // Initialize Firebase
           var config = {
            apiKey: "AIzaSyCLBFhxMYxAqdnlMHhI6JFI4jqp16FoY0c",
            authDomain: "boxwood-chassis-125322.firebaseapp.com",
            databaseURL: "https://boxwood-chassis-125322.firebaseio.com",
            storageBucket: "boxwood-chassis-125322.appspot.com",
          };
          firebase.initializeApp(config);
        function signInEvent(){
            var email = $('#email').val();
            var password = $('#password').val();
            //signInFirebase(email,password);
            signInLocalStorage(email,password);
        };
        
        function signInLocalStorage(email,password){            
            
            if(validateSession(email,password)){
                alert("Success");
                var a = $('#redirect');
                a.click();
                window.location.href = "index.html";
                window.location.href = "/index.html";
                window.location.href = "../index.html";
                $(location).attr('href', "index.html");
            } else {
                alert("Invalid user or password");
            }                                    
        };
        
        
        function validateSession (username,email){                       
            var localUsr = window.localStorage.getItem("username");
            var localPass =  window.localStorage.getItem("password");
            if(username !== undefined && password !== undefined){
                if (localUsr === username && localPass === email){
                    return true;
                }
            }
            return false;
        }
        
        function signInFirebase(email,password){  
            try {
                
            firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {
              // Handle Errors here.
              if(error){
                    var errorCode = error.code;
                    var errorMessage = error.message;   
                    alert(error.message);
                  }
              // ...
            });
                
            }catch (e){}
        } 
     </script>    
     <!-- end: Javascript -->
   </body>
   </html>